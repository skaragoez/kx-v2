"use strict";

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; var r = _regenerator(), e = r.m(_regeneratorRuntime), t = (Object.getPrototypeOf ? Object.getPrototypeOf(e) : e.__proto__).constructor; function n(r) { var e = "function" == typeof r && r.constructor; return !!e && (e === t || "GeneratorFunction" === (e.displayName || e.name)); } var o = { "throw": 1, "return": 2, "break": 3, "continue": 3 }; function a(r) { var e, t; return function (n) { e || (e = { stop: function stop() { return t(n.a, 2); }, "catch": function _catch() { return n.v; }, abrupt: function abrupt(r, e) { return t(n.a, o[r], e); }, delegateYield: function delegateYield(r, o, a) { return e.resultName = o, t(n.d, _regeneratorValues(r), a); }, finish: function finish(r) { return t(n.f, r); } }, t = function t(r, _t, o) { n.p = e.prev, n.n = e.next; try { return r(_t, o); } finally { e.next = n.n; } }), e.resultName && (e[e.resultName] = n.v, e.resultName = void 0), e.sent = n.v, e.next = n.n; try { return r.call(this, e); } finally { n.p = e.prev, n.n = e.next; } }; } return (_regeneratorRuntime = function _regeneratorRuntime() { return { wrap: function wrap(e, t, n, o) { return r.w(a(e), t, n, o && o.reverse()); }, isGeneratorFunction: n, mark: r.m, awrap: function awrap(r, e) { return new _OverloadYield(r, e); }, AsyncIterator: _regeneratorAsyncIterator, async: function async(r, e, t, o, u) { return (n(e) ? _regeneratorAsyncGen : _regeneratorAsync)(a(r), e, t, o, u); }, keys: _regeneratorKeys, values: _regeneratorValues }; })(); }
function _regeneratorValues(e) { if (null != e) { var t = e["function" == typeof Symbol && Symbol.iterator || "@@iterator"], r = 0; if (t) return t.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) return { next: function next() { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e }; } }; } throw new TypeError(_typeof(e) + " is not iterable"); }
function _regeneratorKeys(e) { var n = Object(e), r = []; for (var t in n) r.unshift(t); return function e() { for (; r.length;) if ((t = r.pop()) in n) return e.value = t, e.done = !1, e; return e.done = !0, e; }; }
function _regeneratorAsync(n, e, r, t, o) { var a = _regeneratorAsyncGen(n, e, r, t, o); return a.next().then(function (n) { return n.done ? n.value : a.next(); }); }
function _regeneratorAsyncGen(r, e, t, o, n) { return new _regeneratorAsyncIterator(_regenerator().w(r, e, t, o), n || Promise); }
function _regeneratorAsyncIterator(t, e) { function n(r, o, i, f) { try { var c = t[r](o), u = c.value; return u instanceof _OverloadYield ? e.resolve(u.v).then(function (t) { n("next", t, i, f); }, function (t) { n("throw", t, i, f); }) : e.resolve(u).then(function (t) { c.value = t, i(c); }, function (t) { return n("throw", t, i, f); }); } catch (t) { f(t); } } var r; this.next || (_regeneratorDefine2(_regeneratorAsyncIterator.prototype), _regeneratorDefine2(_regeneratorAsyncIterator.prototype, "function" == typeof Symbol && Symbol.asyncIterator || "@asyncIterator", function () { return this; })), _regeneratorDefine2(this, "_invoke", function (t, o, i) { function f() { return new e(function (e, r) { n(t, i, e, r); }); } return r = r ? r.then(f, f) : f(); }, !0); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, _regeneratorDefine2(e, r, n, t); }
function _OverloadYield(e, d) { this.v = e, this.k = d; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
// Contact Form 7 - Clickable Radio Button List Items
document.addEventListener('DOMContentLoaded', function () {
  // Wait for Contact Form 7 to be fully loaded
  var checkFormReady = setInterval(function () {
    var listItems = document.querySelectorAll('.service-selection .wpcf7-list-item');
    if (listItems.length > 0) {
      clearInterval(checkFormReady);
      initClickableRadioItems();
    }
  }, 100);
  function initClickableRadioItems() {
    // Make entire list item clickable for radio buttons
    var listItems = document.querySelectorAll('.service-selection .wpcf7-list-item');
    listItems.forEach(function (item) {
      item.addEventListener('click', function (e) {
        // Only trigger if not clicking directly on the radio button
        if (e.target.type !== 'radio') {
          var radio = item.querySelector('input[type="radio"]');
          if (radio) {
            radio.checked = true;
            // Trigger change event
            radio.dispatchEvent(new Event('change'));
          }
        }
      });
    });
  }
});

// --
// Slider modifications

(function () {
  // Function to modify swiper after initialization
  function modifySwiper(swiperInstance) {
    // Responsive breakpoints (matching _variables.scss)
    swiperInstance.params.breakpoints = {
      0: {
        slidesPerView: 1
      },
      782: {
        // sm (mobile)
        slidesPerView: 2
      },
      1030: {
        // md
        slidesPerView: 2
      },
      1230: {
        // lg (content)
        slidesPerView: 3
      }
    };

    // Apply the changes
    swiperInstance.update();
    console.log('Swiper modified:', swiperInstance);
  }

  // Listen for swiper initialization events
  document.addEventListener('swiper:afterInit', function (event) {
    var swiperInstance = event.detail;
    modifySwiper(swiperInstance);
  });

  // Also handle any existing swipers that might already be initialized
  document.addEventListener('DOMContentLoaded', function () {
    // Small delay to ensure swipers are initialized
    setTimeout(function () {
      var sliders = document.querySelectorAll('.swiper');
      sliders.forEach(function (slider) {
        if (slider.swiper) {
          modifySwiper(slider.swiper);
        }
      });
    }, 100);
  });
})();

// --
// KX Posts Grid (filters + load more) - Simple, native, delegated
(function () {
  var SELECTOR_ROOT = '.kx-posts-grid';
  var SELECTOR_FILTER = '.kx-posts-grid__filters [data-tag]';
  var SELECTOR_ITEMS = '.kx-posts-grid__items';
  var SELECTOR_LOAD_MORE = '.kx-posts-grid__load-more';
  function getAjaxUrl(root) {
    var _root$dataset;
    return (root === null || root === void 0 || (_root$dataset = root.dataset) === null || _root$dataset === void 0 ? void 0 : _root$dataset.ajaxUrl) || window.ajaxurl || window.location.origin + '/wp-admin/admin-ajax.php';
  }
  function fetchPage(_x, _x2) {
    return _fetchPage.apply(this, arguments);
  }
  function _fetchPage() {
    _fetchPage = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(root, _ref) {
      var _ref$page, page, _ref$perPage, perPage, _ref$tag, tag, _ref$append, append, _ref$nonce, nonce, itemsEl, params, res, data, loadMoreBtn;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            _ref$page = _ref.page, page = _ref$page === void 0 ? 1 : _ref$page, _ref$perPage = _ref.perPage, perPage = _ref$perPage === void 0 ? 9 : _ref$perPage, _ref$tag = _ref.tag, tag = _ref$tag === void 0 ? '' : _ref$tag, _ref$append = _ref.append, append = _ref$append === void 0 ? false : _ref$append, _ref$nonce = _ref.nonce, nonce = _ref$nonce === void 0 ? '' : _ref$nonce;
            itemsEl = root.querySelector(SELECTOR_ITEMS);
            if (itemsEl) {
              _context.next = 4;
              break;
            }
            return _context.abrupt("return");
          case 4:
            root.classList.add('is-loading');
            params = new URLSearchParams({
              action: 'kx_posts_grid_fetch',
              _ajax_nonce: nonce,
              paged: String(page),
              per_page: String(perPage),
              tag: tag || ''
            });
            _context.prev = 6;
            _context.next = 9;
            return fetch(getAjaxUrl(root), {
              method: 'POST',
              headers: {
                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
              },
              credentials: 'same-origin',
              body: params.toString()
            });
          case 9:
            res = _context.sent;
            _context.next = 12;
            return res.json();
          case 12:
            data = _context.sent;
            if (!(!data || !data.success || !data.data)) {
              _context.next = 15;
              break;
            }
            throw new Error('Invalid response');
          case 15:
            if (append) itemsEl.insertAdjacentHTML('beforeend', data.data.html);else itemsEl.innerHTML = data.data.html;
            itemsEl.dataset.page = String(data.data.page);
            itemsEl.dataset.tag = tag || '';
            loadMoreBtn = root.querySelector(SELECTOR_LOAD_MORE);
            if (loadMoreBtn) loadMoreBtn.style.display = data.data.has_more ? '' : 'none';
            _context.next = 26;
            break;
          case 22:
            _context.prev = 22;
            _context.t0 = _context["catch"](6);
            console.error(_context.t0);
            if (!append) itemsEl.innerHTML = '<p class="notice">Failed to load posts.</p>';
          case 26:
            _context.prev = 26;
            root.classList.remove('is-loading');
            return _context.finish(26);
          case 29:
          case "end":
            return _context.stop();
        }
      }, _callee, null, [[6, 22, 26, 29]]);
    }));
    return _fetchPage.apply(this, arguments);
  }
  function initRoot(root) {
    // Nothing to bind directly; we use delegation below
    // Ensure dataset defaults are present
    var itemsEl = root.querySelector(SELECTOR_ITEMS);
    if (itemsEl) {
      itemsEl.dataset.page = itemsEl.dataset.page || '1';
      itemsEl.dataset.tag = itemsEl.dataset.tag || '';
    }
  }
  function initAll() {
    document.querySelectorAll(SELECTOR_ROOT).forEach(initRoot);
  }

  // Initialize on DOM ready
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initAll);else initAll();

  // Expose manual init for dynamically added content
  window.kxPostsGridInit = initAll;

  // Delegated: filter click
  document.addEventListener('click', function (e) {
    var link = e.target.closest(SELECTOR_FILTER);
    if (!link) return;
    var root = link.closest(SELECTOR_ROOT);
    if (!root) return;
    e.preventDefault();

    // Active state
    var filtersEl = root.querySelector('.kx-posts-grid__filters');
    if (filtersEl) {
      filtersEl.querySelectorAll('[data-tag]').forEach(function (a) {
        return a.classList.toggle('is-active', a === link);
      });
    }
    var perPage = parseInt(root.dataset.perPage || '9', 10);
    var nonce = root.dataset.nonce || '';
    var tag = link.dataset.tag || '';
    fetchPage(root, {
      page: 1,
      perPage: perPage,
      tag: tag,
      append: false,
      nonce: nonce
    });
  }, true);

  // Delegated: keyboard active on filters
  document.addEventListener('keydown', function (e) {
    if (!(e.key === 'Enter' || e.key === ' ')) return;
    var link = e.target.closest(SELECTOR_FILTER);
    if (!link) return;
    e.preventDefault();
    link.click();
  });

  // Delegated: load more
  document.addEventListener('click', function (e) {
    var btn = e.target.closest(SELECTOR_ROOT + ' ' + SELECTOR_LOAD_MORE);
    if (!btn) return;
    var root = btn.closest(SELECTOR_ROOT);
    if (!root) return;
    e.preventDefault();
    var itemsEl = root.querySelector(SELECTOR_ITEMS);
    if (!itemsEl) return;
    var perPage = parseInt(root.dataset.perPage || '9', 10);
    var nonce = root.dataset.nonce || '';
    var page = parseInt(itemsEl.dataset.page || '1', 10) + 1;
    var tag = itemsEl.dataset.tag || '';
    fetchPage(root, {
      page: page,
      perPage: perPage,
      tag: tag,
      append: true,
      nonce: nonce
    });
  }, true);
})();

// --
// CTA bar visibility based on hero/contact visibility

(function () {
  function isBlockEditorPreview() {
    try {
      if (window.self !== window.top && window.parent && window.parent.document && window.parent.document.body) {
        var parentBody = window.parent.document.body;
        var cls = parentBody.classList;
        return cls.contains('block-editor-page') || cls.contains('edit-site-page');
      }
    } catch (e) {
      // Cross-origin or access issue; assume not editor
    }
    return false;
  }
  function initCtaBarObserver() {
    // Do not run inside Gutenberg/Site Editor preview iframe
    if (isBlockEditorPreview()) return;
    var ctaBar = document.querySelector('.wp-block-group.cta-bar');
    if (!ctaBar) return;
    var hero = document.querySelector('section.hero, .hero');
    var contact = document.querySelector('section.contact, .contact');
    var isHeroCompletelyGone = false;
    var isContactFullyVisible = false;
    function updateCtaVisibility() {
      var shouldShow = isHeroCompletelyGone && !isContactFullyVisible;
      if (shouldShow) {
        ctaBar.classList.add('is-visible');
      } else {
        ctaBar.classList.remove('is-visible');
      }
    }
    if (hero) {
      var heroObserver = new IntersectionObserver(function (entries) {
        entries.forEach(function (entry) {
          // Show CTA only when hero is completely out of viewport
          isHeroCompletelyGone = !entry.isIntersecting;
          updateCtaVisibility();
        });
      }, {
        root: null,
        threshold: 0
      });
      heroObserver.observe(hero);
    } else {
      // If there is no hero section, keep CTA hidden by default
      isHeroCompletelyGone = false;
      updateCtaVisibility();
    }
    if (contact) {
      var contactObserver = new IntersectionObserver(function (entries) {
        entries.forEach(function (entry) {
          // Hide CTA when contact section is fully visible in viewport
          isContactFullyVisible = entry.isIntersecting && entry.intersectionRatio >= 0.1;
          updateCtaVisibility();
        });
      }, {
        root: null,
        threshold: 0.1
      });
      contactObserver.observe(contact);
    }
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCtaBarObserver);
  } else {
    initCtaBarObserver();
  }
})();

// --
// Newsticker functionality

(function () {
  // Newsticker configuration
  var config = {
    selector: '.wp-block-group.newsticker',
    contentSelector: '.newsticker-content',
    speed: 50,
    // pixels per second
    pauseOnHover: true,
    resetThreshold: 0.1,
    // Reset when 10% past the left edge
    mobileBreakpoint: 782,
    // Same as $breakpoints.sm from SCSS
    debug: false
  };

  // Check if current viewport is mobile
  function isMobile() {
    return window.innerWidth <= config.mobileBreakpoint;
  }
  function createNewsticker(container) {
    var content = container.querySelector(config.contentSelector);
    if (!content) {
      if (config.debug) console.warn('Newsticker content not found in container:', container);
      return null;
    }

    // Create newsticker instance
    var newsticker = {
      container: container,
      content: content,
      containerWidth: 0,
      contentWidth: 0,
      position: 0,
      isPaused: false,
      animationId: null,
      lastTime: 0,
      isActive: false,
      init: function init() {
        if (isMobile()) {
          this.setupDOM();
          this.calculateDimensions();
          this.setupEventListeners();
          this.start();
          this.isActive = true;
        } else {
          this.deactivate();
        }
        if (config.debug) console.log('Newsticker initialized:', this, 'Active:', this.isActive);
      },
      activate: function activate() {
        if (!this.isActive && isMobile()) {
          this.setupDOM();
          this.calculateDimensions();
          this.start();
          this.isActive = true;
          if (config.debug) console.log('Newsticker activated');
        }
      },
      deactivate: function deactivate() {
        if (this.isActive) {
          this.stop();
          this.resetDOM();
          this.isActive = false;
          if (config.debug) console.log('Newsticker deactivated');
        }
      },
      resetDOM: function resetDOM() {
        // Reset inline styles for desktop display
        this.content.style.transform = '';
        this.content.style.willChange = '';
        // Remove duplicated content for desktop
        this.removeDuplicateContent();
      },
      setupDOM: function setupDOM() {
        // Ensure proper CSS setup
        this.container.style.overflow = 'hidden';
        this.container.style.position = 'relative';
        this.container.style.width = '100%';
        this.content.style.display = 'flex';
        this.content.style.whiteSpace = 'nowrap';
        this.content.style.willChange = 'transform';
        this.content.style.position = 'relative';

        // Duplicate content for seamless loop
        this.duplicateContent();
      },
      duplicateContent: function duplicateContent() {
        var _this = this;
        // Check if content is already duplicated
        if (this.content.querySelector('.newsticker-duplicate')) {
          return;
        }

        // Clone all children and append them
        var originalChildren = Array.from(this.content.children);
        originalChildren.forEach(function (child) {
          var clone = child.cloneNode(true);
          clone.classList.add('newsticker-duplicate');
          _this.content.appendChild(clone);
        });
        if (config.debug) console.log('Content duplicated for seamless loop');
      },
      removeDuplicateContent: function removeDuplicateContent() {
        // Remove duplicated content
        var duplicates = this.content.querySelectorAll('.newsticker-duplicate');
        duplicates.forEach(function (duplicate) {
          return duplicate.remove();
        });
        if (config.debug) console.log('Duplicate content removed');
      },
      calculateDimensions: function calculateDimensions() {
        this.containerWidth = this.container.offsetWidth;
        // Calculate original content width (half of total, since we duplicated)
        this.originalContentWidth = this.content.scrollWidth / 2;
        this.contentWidth = this.content.scrollWidth;
        this.position = 0; // Start from original position

        if (config.debug) {
          console.log('Dimensions calculated:', {
            container: this.containerWidth,
            originalContent: this.originalContentWidth,
            totalContent: this.contentWidth
          });
        }
      },
      setupEventListeners: function setupEventListeners() {
        var _this2 = this;
        if (config.pauseOnHover) {
          this.container.addEventListener('mouseenter', function () {
            if (_this2.isActive) _this2.pause();
          });
          this.container.addEventListener('mouseleave', function () {
            if (_this2.isActive) _this2.resume();
          });
        }

        // Handle visibility change (pause when tab is not visible)
        document.addEventListener('visibilitychange', function () {
          if (_this2.isActive) {
            if (document.hidden) {
              _this2.pause();
            } else if (!_this2.container.matches(':hover')) {
              _this2.resume();
            }
          }
        });
      },
      animate: function animate(currentTime) {
        var _this3 = this;
        if (!this.lastTime) this.lastTime = currentTime;
        var deltaTime = currentTime - this.lastTime;
        this.lastTime = currentTime;
        if (!this.isPaused && deltaTime > 0) {
          // Calculate movement based on time elapsed
          var movement = config.speed * deltaTime / 1000;
          this.position -= movement;

          // Reset when original content width is scrolled (seamless loop with duplicates)
          if (this.position <= -this.originalContentWidth) {
            this.position = 0; // Reset to create seamless loop
          }

          // Apply transform
          this.content.style.transform = "translateX(".concat(this.position, "px)");
        }
        this.animationId = requestAnimationFrame(function (time) {
          return _this3.animate(time);
        });
      },
      start: function start() {
        var _this4 = this;
        if (this.animationId) {
          cancelAnimationFrame(this.animationId);
        }
        this.lastTime = 0;
        this.animationId = requestAnimationFrame(function (time) {
          return _this4.animate(time);
        });
      },
      pause: function pause() {
        this.isPaused = true;
        if (config.debug) console.log('Newsticker paused');
      },
      resume: function resume() {
        this.isPaused = false;
        if (config.debug) console.log('Newsticker resumed');
      },
      stop: function stop() {
        if (this.animationId) {
          cancelAnimationFrame(this.animationId);
          this.animationId = null;
        }
      },
      handleResize: function handleResize() {
        // Check if mobile state changed and activate/deactivate accordingly
        if (isMobile() && !this.isActive) {
          this.activate();
        } else if (!isMobile() && this.isActive) {
          this.deactivate();
        } else if (this.isActive) {
          // Just recalculate dimensions if still active
          this.calculateDimensions();
        }
        if (config.debug) console.log('Newsticker resized, mobile:', isMobile(), 'active:', this.isActive);
      },
      // Public method to update speed
      setSpeed: function setSpeed(newSpeed) {
        config.speed = newSpeed;
        if (config.debug) console.log('Newsticker speed updated to:', newSpeed);
      }
    };
    return newsticker;
  }
  function initNewstickers() {
    var containers = document.querySelectorAll(config.selector);
    var instances = [];
    containers.forEach(function (container) {
      // Skip if already initialized
      if (container.newstickerInstance) {
        return;
      }
      var instance = createNewsticker(container);
      if (instance) {
        instance.init();
        container.newstickerInstance = instance;
        instances.push(instance);
      }
    });

    // Setup global resize handler for all instances
    if (instances.length > 0) {
      var resizeTimeout;
      window.addEventListener('resize', function () {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(function () {
          instances.forEach(function (instance) {
            if (instance && instance.handleResize) {
              instance.handleResize();
            }
          });
        }, 250);
      });
    }
    return instances;
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initNewstickers);
  } else {
    initNewstickers();
  }

  // Expose global functions for manual control (optional)
  window.NewstickerControl = {
    init: initNewstickers,
    pauseAll: function pauseAll() {
      document.querySelectorAll(config.selector).forEach(function (container) {
        if (container.newstickerInstance && container.newstickerInstance.isActive) {
          container.newstickerInstance.pause();
        }
      });
    },
    resumeAll: function resumeAll() {
      document.querySelectorAll(config.selector).forEach(function (container) {
        if (container.newstickerInstance && container.newstickerInstance.isActive) {
          container.newstickerInstance.resume();
        }
      });
    },
    setGlobalSpeed: function setGlobalSpeed(speed) {
      config.speed = speed;
      document.querySelectorAll(config.selector).forEach(function (container) {
        if (container.newstickerInstance && container.newstickerInstance.isActive) {
          container.newstickerInstance.setSpeed(speed);
        }
      });
    },
    forceActivateAll: function forceActivateAll() {
      document.querySelectorAll(config.selector).forEach(function (container) {
        if (container.newstickerInstance) {
          container.newstickerInstance.activate();
        }
      });
    },
    deactivateAll: function deactivateAll() {
      document.querySelectorAll(config.selector).forEach(function (container) {
        if (container.newstickerInstance) {
          container.newstickerInstance.deactivate();
        }
      });
    },
    isMobile: isMobile
  };
})();
//# sourceMappingURL=app.min.js.map