"use strict";

// Contact Form 7 - Conditional Fields Logic
document.addEventListener('DOMContentLoaded', function () {
  // Wait for Contact Form 7 to be fully loaded
  var checkFormReady = setInterval(function () {
    var radioButtons = document.querySelectorAll('input[name="service-type"]');
    if (radioButtons.length > 0) {
      clearInterval(checkFormReady);
      initConditionalFields();
    }
  }, 100);
  function initConditionalFields() {
    var radioButtons = document.querySelectorAll('input[name="service-type"]');
    var websiteField = document.getElementById('website-field');
    var socialMediaField = document.getElementById('social-media-field');
    var websiteInput = document.getElementById('website');
    var socialMediaInput = document.getElementById('social-media');

    // Function to update field visibility and requirements
    function updateFields() {
      var selectedValue = document.querySelector('input[name="service-type"]:checked');
      if (!selectedValue) {
        // Hide both fields if nothing is selected
        hideField(websiteField, websiteInput);
        hideField(socialMediaField, socialMediaInput);
        return;
      }
      var value = selectedValue.value;
      if (value === 'Website Analizi') {
        showField(websiteField, websiteInput);
        hideField(socialMediaField, socialMediaInput);
      } else if (value === 'Sosyal Medya Analizi') {
        hideField(websiteField, websiteInput);
        showField(socialMediaField, socialMediaInput);
      } else {
        hideField(websiteField, websiteInput);
        hideField(socialMediaField, socialMediaInput);
      }
    }
    function showField(fieldContainer, input) {
      if (fieldContainer && input) {
        fieldContainer.style.display = 'block';
        fieldContainer.style.opacity = '0';

        // Smooth fade in animation
        setTimeout(function () {
          fieldContainer.style.transition = 'opacity 0.3s ease-in-out';
          fieldContainer.style.opacity = '1';
        }, 10);

        // Make field required
        input.setAttribute('required', 'required');
        input.setAttribute('aria-required', 'true');

        // Add required class for CF7 validation
        input.classList.add('wpcf7-validates-as-required');
      }
    }
    function hideField(fieldContainer, input) {
      if (fieldContainer && input) {
        fieldContainer.style.transition = 'opacity 0.3s ease-in-out';
        fieldContainer.style.opacity = '0';
        setTimeout(function () {
          fieldContainer.style.display = 'none';
        }, 300);

        // Remove required attribute
        input.removeAttribute('required');
        input.removeAttribute('aria-required');
        input.classList.remove('wpcf7-validates-as-required');

        // Clear the value when hiding
        input.value = '';

        // Remove any validation errors
        input.classList.remove('wpcf7-not-valid');
        var wrapper = input.closest('.wpcf7-form-control-wrap');
        if (wrapper) {
          var errorSpan = wrapper.querySelector('.wpcf7-not-valid-tip');
          if (errorSpan) {
            errorSpan.remove();
          }
        }
      }
    }

    // Add event listeners to radio buttons
    radioButtons.forEach(function (radio) {
      radio.addEventListener('change', updateFields);
    });

    // Make entire list item clickable for radio buttons
    var listItems = document.querySelectorAll('.service-selection .wpcf7-list-item');
    listItems.forEach(function (item) {
      item.addEventListener('click', function (e) {
        // Only trigger if not clicking directly on the radio button
        if (e.target.type !== 'radio') {
          var radio = item.querySelector('input[type="radio"]');
          if (radio) {
            radio.checked = true;
            // Trigger change event to update conditional fields
            radio.dispatchEvent(new Event('change'));
          }
        }
      });
    });

    // Initial check
    updateFields();

    // Re-run when form is reset or reloaded
    document.addEventListener('wpcf7mailsent', function () {
      setTimeout(updateFields, 100);
    });
    document.addEventListener('wpcf7invalid', function () {
      updateFields();
    });
  }

  // Handle form validation for conditional fields
  document.addEventListener('wpcf7invalid', function (event) {
    var form = event.target;

    // Scroll to first visible error field
    setTimeout(function () {
      var firstError = form.querySelector('.wpcf7-not-valid');
      if (firstError) {
        var fieldContainer = firstError.closest('.form-section');
        if (fieldContainer && fieldContainer.style.display !== 'none') {
          firstError.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
          });
        }
      }
    }, 100);
  });
});
//# sourceMappingURL=app.min.js.map